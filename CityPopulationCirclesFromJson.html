<!DOCTYPE html>
<html>
  <head>
    <title>City Circles from JSON File</title>
    <script src="https://maps.googleapis.com/maps/api/js"></script> <!--GM API-->
		<script type="text/javascript" src="jquery-1.7.1.min.js"></script> <!--JSON library-->
	</head>
	
  <body>
		<button onclick="ShowCircles()">Show MSA Circles</button>
		<button onclick="HideCircles()">Hide MSA Circles</button>
	  <div id="map_canvas" style="width: 700px; height: 300px; border: 1px solid #666666;"></div>
		<script>
			
			//create a map
			var mapOptions = {
					zoom: 4,
					center: new google.maps.LatLng(37.09024, -95.712891),
					mapTypeId: google.maps.MapTypeId.TERRAIN
			};
			var map = new google.maps.Map(document.getElementById('map_canvas'),mapOptions);
			
			// create GM circle
			function CreateACircle(loc, radius){
				var populationOptions = {
						strokeColor: '#FF0000',
						strokeOpacity: 0.8,
						strokeWeight: 2,
						fillColor: '#FF0000',
						fillOpacity: 0.35,
						center: loc,
						radius: radius
					};
				return new google.maps.Circle(populationOptions);
			}
					
			//Get city data from JSON file and add city circles to the map
			var cityCircles;
			$.getJSON("SevenCities.json",function(json){CreateCityCircles(json);});
						
			function CreateCityCircles(json) {
				//get the number of cities
				var n=json.Cities.length; 			
				var radius=100000; //in meters?
				
				//create circles for each city
				cityCircles=new Array(n);
				for (var i = 0; i <n; i++) {
					cityLoc=new google.maps.LatLng(json.Cities[i].lat,json.Cities[i].lon);
					cityCircles[i]=CreateACircle(cityLoc,radius);
				}
			}
			
			function ShowCircles() {
				var n=cityCircles.length;
				for (var i = 0; i <n; i++) {
					cityCircles[i].setMap(map);
				}
			}
			
			function HideCircles() {
				var n=cityCircles.length;
				for (var i = 0; i <n; i++) {
					cityCircles[i].setMap(null);
				}
			}
		</script>
  </body>
</html>
